<div *ngIf="lb.dataSource as ds"
    [style.height]="ds.height$ | async"
    class="pundit-sidebar {{ ds.isCollapsed.getValue() ? 'is-collapsed' : '' }}">
    <div class="pundit-sidebar__user-row">
        <!-- pundit icon inside a circle -->
        <span class="n7-icon-pundit pundit-sidebar__logo">
            <img [src]="logo"
                 alt="pundit mock logo"
                 (click)="lb.eventHandler.emitInner('clicklogo')">
        </span>
        <!-- user name -->
        <span class="pundit-sidebar__user-name">
            <n7-anchor-wrapper>John Doe</n7-anchor-wrapper>
        </span>
        <div class="pundit-sidebar__actions">
            <a href="#" class="pundit-sidebar__notebook-panel" (click)="lb.eventHandler.emitInner('notebookpanel')">
                <n7-anchor-wrapper>
                    <span class="n7-icon-book pundit-sidebar__header-icon"></span>
                </n7-anchor-wrapper>
            </a>
            <a href="#" class="pundit-sidebar__close-button" (click)="lb.eventHandler.emitInner('sidebarclose')">
                <n7-anchor-wrapper>
                    <span class="n7-icon-close pundit-sidebar__header-icon"></span>
                </n7-anchor-wrapper>
            </a>
        </div>
    </div>

    <!-- notebook selection / creation panel -->
    <ng-container *ngIf="lb.dataSource.notebookEditor.getValue()">
        <ng-container *ngTemplateOutlet="notebookpanel"></ng-container>
    </ng-container>
    
    
    <div class="pundit-sidebar__annotation-column">
        <n7-header [data]="ds.headerMock"></n7-header>
        <ng-container *ngFor="let annotation of lb.widgets['annotation'].ds.out$ | async">
            <n7-annotation [data]="annotation"
                           [emit]="lb.widgets['annotation'].emit">
            </n7-annotation>
        </ng-container>
    </div>
</div>


<ng-template #notebookpanel>
    <notebook-panel [data]="{ x: true }"></notebook-panel>
</ng-template>
